
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Homepage Jan Baer">
    <title>Archives: 2013 - Homepage Jan Baer</title>
    <meta name="author" content="Jan Baer">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta property="og:type" content="blog">
<meta property="og:title" content="Homepage Jan Baer">
<meta property="og:url" content="https://www.janbaer.de/archives/2013/index.html">
<meta property="og:site_name" content="Homepage Jan Baer">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Homepage Jan Baer">
<meta name="twitter:creator" content="@reabnaj">
    
        <meta rel="publisher" content="https://plus.google.com/+janbaer"/>
    
    
    
        <meta property="og:image" content="/assets/images/https:/avatars2.githubusercontent.com/u/528331?v=3&s=140"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-6811781-1']);
        _gaq.push (['_gat._anonymizeIp']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>


</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">Homepage Jan Baer</a>
    </h1>
    
        
            <a class="header-right-picture " href="#about">
        
        
            <img class="header-picture" src="https://avatars2.githubusercontent.com/u/528331?v=3&amp;s=140">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://avatars2.githubusercontent.com/u/528331?v=3&amp;s=140">
            </a>
            <span class="sidebar-profile-name">Jan Baer</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a class="sidebar-button-link " href="/ ">
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a class="sidebar-button-link " href="/projects.html">
                
                    <i class="sidebar-button-icon fa fa-lg fa-book"></i>
                    <span class="sidebar-button-desc">MyProjects</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a class="sidebar-button-link " href="/all-categories">
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a class="sidebar-button-link " href="/all-tags">
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a class="sidebar-button-link " href="/all-archives">
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archives</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a class="sidebar-button-link " href="#about">
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a class="sidebar-button-link " href="https://github.com/janbaer" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a class="sidebar-button-link " href="https://twitter.com/reabnaj" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a class="sidebar-button-link " href="/atom.xml">
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    

<section class="postShorten-group main-content-wrap">
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope="" itemtype="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2013/12/08/2013-12-08-find-out-which-process-uses-my-port/">Find out which process uses my port</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sun Dec 08 2013 00:00:00 GMT+0100">
	
		    Dec 08, 2013
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/develop/">develop</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>Today I had the problem, that someone has used the port 3000 on my macbook and I couldn’t start my node.js server.<br>At first I tried to close all open terminal windows and exit the terminal app, but this wasn’t the solution for my problem.</p>
<p>Now I’ve tried to find out wich process uses the port. For that I entered the following command in the terminal:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -<span class="selector-tag">i</span> :<span class="number">3000</span></div></pre></td></tr></table></figure>
<p>This command returns me informations about the process that is using my port. With the processid I’m now be able to kill the process.</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kill <span class="number">-9</span> <span class="number">11381</span></div></pre></td></tr></table></figure>

                        
                        
                            <p>
                                <a href="/2013/12/08/2013-12-08-find-out-which-process-uses-my-port/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope="" itemtype="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2013/10/27/2013-10-27-reisebericht-dubai/">Reisebericht Dubai</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sun Oct 27 2013 00:00:00 GMT+0200">
	
		    Oct 27, 2013
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Urlaub/">Urlaub</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>Gleich im Anschluss an unseren Urlaub in Indien machten wir einen Zwischenstop in Dubai, um auch diese Stadt kennenzulernen. Und was soll ich sagen, wo Dubai aufgrund der vielen positiven Eindrücke einfach ein Traum war, war Indien manchmal eher ein Albtraum für uns.</p>
<p>Dubai ist eine Stadt, die mit vielen Superlativen glänzen kann. Wir haben zwei geführte Touren mitgemacht und unsere Tourguides haben wirklich sehr oft die Worte “Das höchste”, “Das größte”, “Das beste” usw. gebraucht. Was hier vor allem im neuen Jahrtausend entstanden ist, sucht wirklich seinesgleichen.</p>
<p>Erst als die Engländer gingen und das Öl kam, blühte Dubai und die anderen Städte wie Abu Dhabi auf, und wurde zu dem was es heute ist. Vom ehemaligen Dubai kann man sich heute nur noch im wirklich sehr interessanten und gut gemachten Museum einen Eindruck machen. Im Gegensatz zu Indien, wo es in vielen Regionen noch wie vor hundert Jahren zugeht, sowohl was den Glauben als auch die Lebensumstände angeht. Dubai verlässt sich aber nicht nur auf sein Öl, denn davon hat es eh nicht mehr all zuviel. Deshalb hat Dubai in vielen anderen Industriezweigen deutlich ausgebaut und für die Zukunft vorgesorgt, so dass das Öl nur noch 10 % des Einkommens des Emirats ausmacht.</p>
<p>Dubai machte auf uns nicht den Eindruck einer in Glaubensfragen rückständigen Religion. Die, aus islamischer Sicht, freizügig und unzüchtig bekleideten Frauen waren allerorts zu sehen und scheinen niemanden zu stören.</p>
<p>Überhaupt haben wir über Dubai Dinge erfahren, die man sich eigentlich gar nicht vorstellen kann. So bekommt in Dubai z.B. jedes einheimische Paar vom Staat ein Haus geschenkt und zur Hochzeit noch Geld obendrein. Strom und Wasser sind kostenlos, genauso wie die medizinische Versorgung und das Studium an der eigenen Universität. Wohlgemerkt gilt das nur für den sehr geringen Teil an einheimischen Paaren. An eine Revolution wie sie in anderen arabischen Ländern, wie Ägypten oder aktuell Syrien statt gefunden hat, ist hier nicht zu denken. Warum auch, den einheimischen Menschen hier geht es sehr gut und auch vielen der Emigranten, die den größten Teil der Bevölkerung ausmachen.</p>
<p>Dubai ist eine Stadt, die sehr neu wirkt. Kaum einer der Wolkenkratzer ist älter als 10 Jahre. Die Strassen sind in einem sehr guten Zustand und sehr großzügig, dem, bei über 1.000.000 angemeldeten Kraftfahrzeugen (Stand 2010), sehr großen Fahrzeugaufkommen angemessen. Einen großen Teil davon nehmen die Taxis ein. Man steht wirklich nie mehr als 5 Minuten irgendwo, ohne das ein Taxi vorbeikommt. Und Taxi fahren ist wirklich sehr günstig in Dubai. Und wem das immer noch zu teuer ist, der kann auf den öffentlichen Verkehr ausweichen. Das Busnetz und auch die U-Bahn ist sehr gut ausgebaut. Und wenn man befürchtet, beim Warten auf den Bus einen Hitzekoller zu bekommen, fast jede Haltestelle ist mit einem klimatisierten Warteraum ausgestattet. Die U-Bahn selbst wartet auch mit einer Überraschung auf, sie war weltweit die erste, die führerlos ist.</p>
<p>In Dubai scheint wirklich sehr vieles im Überfluss und auch maßlos zu sein. Wenn ich allein an die Dubai Mall denke, die im Vergleich zu dem Münchner Einkaufszentrum Riem Arkaden mindestens 4 mal größer ist. Dort gibt es wirklich jeden Markenhersteller im eher oberen Preisbereich. Im Verkaufszentrum selbst befindet sich ein Kino (vergleichbar mit dem Münchner Mathäser) und eine große Eislaufbahn, auf der am Vormittag auch das Eishockeyteam (!!!) von Dubai trainiert. Für Kinder gibt es, neben unzähligen Spielegeschäften, auch eine eigene Erlebniswelt in der Eltern ihre Kinder wirklich maßlos verwöhnen können. Und genau das machen viele der Einheimischen auch, sei es beim Spielen, als auch beim Essen, was wir an den vielen übergewichtigen Kindern sehen konnten. Es ist wirklich kaum in Worte zu fassen, auf welche Gegensätze wir bei diesen zwei Urlauben getroffen sind. Auf der anderen Seite sahen wir in Indien Kinder, die morgens nach dem Aufstehen betteln gehen müssen, um wenigstens eine Mahlzeit zu bekommen.</p>
<p>Wir waren natürlich auch auf “The Palm, Jumeirah”, der einer Palme nachempfundenden künstlich angelegten Insel. Dort waren wir im Atlantis, dem größten Hotel von Dubai, und auch einem der größten Welt. Im Hotel wartete eines der größten Aquarien der Welt auf uns, dass wirklich einen beeindruckenende Einblick in die Unterwasserwelt bot.</p>
<p>Der Höhepunkt unserer Besuchs in Dubai war allerdings der Ausflug auf den mit 828 m aktuell höchsten Gebäude der Welt, dem Burj Khalifa. Die Aussichtsplattform lag leider nicht ganz oben, aber 452 m sind trotzdem mehr als beeindruckend. Mit dem Fahrstuhl ist man in genau 60 Sekunden oben. Auf der Aussichtsplattform konnte man durch ein spezielles Fernglas in den historischen Modus schalteten war da, wo sich heute ein Wolkenkratzer neben den anderen reiht, nichts als Wüste oder maximal sehr niedrige Wohngebäude der Beduinen befanden. Die Aussicht auf Dubai war wirklich atemberaubend.</p>
<p>Wir waren nur knapp 3 Tage in Dubai, konnten aber sehr vieles, aber leider nicht alles sehen. So gibt es z.B. in Dubai noch ein natürlich überdachtes Skicenter, an dem wir auch vorbeigefahren sind, aber leider nicht drin waren.<br>Dubai war auf jeden Fall ein Erlebnis, das ich jedem, den die Hitze nicht abschreckt, weiter empfehlen kann.</p>
<p>Wir haben natürlich auch viele Bilder gemacht. Die besten habe ich wie immer bei Google+ online gestellt. Ihr könnt sie Euch <a href="http://is.gd/fxZrSh" target="_blank" rel="external">hier</a> anschauen.</p>
<p>Wir hoffen, das sie Euch gefallen!</p>
<p>Ihr Euch könnt Euch noch ein selbst aufgenommenes Video von der Wasserfontänenshow, die jeden Tag direkt vor dem Burj Khalifa aufgeführt wird, bei <a href="http://www.youtube.com/watch?v=o6K5ginQGjA" target="_blank" rel="external">Youtube</a> anschauen.</p>

                        
                        
                            <p>
                                <a href="/2013/10/27/2013-10-27-reisebericht-dubai/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope="" itemtype="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2013/10/26/2013-10-26-reisebericht-indien/">Reisebericht Indien</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sat Oct 26 2013 00:00:00 GMT+0200">
	
		    Oct 26, 2013
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Urlaub/">Urlaub</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>Eigentlich wollte ich von meiner Reise nach Indien einen ausführlichen Reisebericht schreiben und habe das in meinem privaten Tagebuch auch jeden Tag gemacht.</p>
<p>Da ich aber über die Zustände in Indien sehr enttäuscht und eigentlich auch schockiert war, möchte ich hier nur mein Fazit der Reise ziehen.</p>
<p>Indien, oder besser Hindustan, ist ein Land mit einer langen Geschichte mit viel Tradition und mit für uns Europäer doch recht ungewöhnlich und teilweise befremdlichen Sitten und Gebräuche. Wenn ich allein an die Rolle und Rechte der Frau in Indien denke, so denke ich, dass wir in Europa deutlich weiter sind. In Indien geht die Schere zwischen Arm und Reich doch deutlich auseinander. Man denkt, das man eine Zeitreise unternimmt, allein wenn man in Dehli zwischen den modernen Stadtvierteln und den recht alten und ärmlich wirkenden Vierteln in Alt-Dehli, aber auch in Neu-Dehli reist. Noch größer ist der Unterschied, wenn man auf das Land kommt. Da fühlt man sich wirklich um 100 Jahre und mehr in der Zeit zurückversetzt. Die hygienischen Bedingungen in Indien auf den Strassen und in den “Wohnungen” der Armen sind wirklich katastrophal. Das schlimmste ist, dass die wenigsten Einheimischen sich dessen überhaupt bewusst sind und deshalb auch nicht im Traum daran denken, dass sich diese Situation ändern muss oder kann.</p>
<p>Die Tatsache, das in einem eigentlich wohlhabenden Land, wie Indien, in der keine Diktatoren sich bereichern, Kinder morgens, statt in die Schule, betteln gehen müssen, um am Abend nicht mit einem leeren Magen einschlafen zu müssen, hat mich wirklich sehr nachdenklich und traurig gemacht. Als ich einmal drei Kindern je 10 Rupien in die Hand gedrückt habe, standen ein paar Minuten später, gleich drei mal soviel vor dem Bus. Das zeigt, das die Armut eigentlich noch viel Schlimmer ist, als es auf den ersten Blick schon erscheint.</p>
<p>Ich hatte eigentlich den größten Teil der Reise ein sehr schlechtes Gefühl, weil die Armut und der Schmutz doch die positiven Momente überwog. Ich glaube, ich werde nie den Anblick der wahren Flut an Menschen vergessen, die mehr oder weniger durch den Tag vegetieren und deren Sinn des Lebens darin besteht, irgendwie etwas Geld für Essen zu erbetteln.</p>
<p>Die Reise nach Indien war für uns sehr interessant, zum großen Teil für uns aber ein eher unangenehmes Erlebnis.</p>
<p>Wir haben natürlich auch viele Bilder gemacht. Die besten habe ich wie immer bei Google+ online gestellt. Ihr könnt sie Euch <a href="http://is.gd/IS3UWO" target="_blank" rel="external">hier</a> anschauen.</p>

                        
                        
                            <p>
                                <a href="/2013/10/26/2013-10-26-reisebericht-indien/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope="" itemtype="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2013/09/01/2013-09-01-using-hooks-in-git/">Using hooks in git</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sun Sep 01 2013 00:00:00 GMT+0200">
	
		    Sep 01, 2013
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/develop/">develop</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>Wenn man nach “git hooks” sucht, findet man jede Menge Links zu guten Beschreibungen, was es für verschiedene Hooks in Git gibt und was man alles damit machen kann.</p>
<p>Deshalb möchte ich mich in diesem Artikel darauf beschränken, zu beschreiben, wie ich den <strong>post-commit</strong> hook in einem meiner Projekte verwende.</p>
<p>Ich habe für mich mit <a href="http://markdoc.org" target="_blank" rel="external">MarkDoc</a>ein kleines Wiki erstellt das ich über die Github-Websites über <a href="http://wiki.janbaer.de" target="_blank" rel="external">wiki.janbaer.de</a> erreiche. Dieses Wiki wird mit einfachen Textdateien im <strong>Markdown</strong> Format erstellt und über ein <strong>Python</strong> Script in HTML umgewandelt.</p>
<p>Ich habe jeweils für Text- und HTML-Dateien ein eigenes Git-Repository eingerichet, damit ich die HTML-Dateien über GitHub als Webseiten publishen kann.</p>
<p>Nun möchte ich, das, sobald ich einen Commit in meinem Source Repository gemacht habe, automatisch die HTML-Dateien erstellt und das Ergebnis dann gleich zu Github gepusht wird.</p>
<p>Um den Vorgang zu automatisieren, habe ich im Unterordner <strong>.git/hooks</strong> die Datei <strong>post-commit-sample</strong> in <strong>post-commit</strong> umbenannt und mit <strong>chmod</strong> aus ausführbar markiert.</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> .git/hooks</div><div class="line">mv <span class="keyword">post</span>-commit-<span class="keyword">sample</span> <span class="keyword">post</span>-commit</div><div class="line">chmod +x <span class="keyword">post</span>-commit</div><div class="line"><span class="keyword">cd</span> ../..</div></pre></td></tr></table></figure>
<p>In die <strong>post-commit</strong> Datei habe ich jetzt folgende Befehle eingefügt</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">message</span>=$(git log -<span class="number">1</span> HEAD --pretty<span class="symbol">=format</span>:%s)</div><div class="line"><span class="symbol">git</span> <span class="keyword">push</span></div><div class="line"><span class="keyword">markdoc </span><span class="keyword">build</span></div><div class="line"><span class="keyword">pushd </span>.</div><div class="line"><span class="symbol">cd</span> ~/DropBox/WebSites/wiki</div><div class="line"><span class="symbol">git</span> <span class="keyword">add </span>.</div><div class="line"><span class="symbol">git</span> commit -m <span class="string">"$message"</span></div><div class="line"><span class="symbol">git</span> <span class="keyword">push</span></div><div class="line"><span class="keyword">popd </span>.</div></pre></td></tr></table></figure>
<p>In der ersten Zeile hole ich mir die Commit-Message aus meinem letzten Commit, damit ich diese an Commit für das zweite Git-Repository verwenden kann. Danach werden zuerst mal meine Änderungen auf Github gepusht. Über <strong>markdoc build</strong> werden die neuen HTML-Dateien erstellt. Danach wechsle ich in das Verzeichnis, in dem sich mein zweites Git-Repository befindet und führe dort die nötigen Git-Befehle aus, um die neuen oder geänderten Dateien zu commiten und zu Github zu pushen.</p>
<p>Leider gibt es keinen Hook für <strong>pre-push</strong>. Diesen könnte man gut verwenden, um einen lokalen Build mit anschließenden UnitTests durchzuführen. Das möchte ich ungern bei jedem Commit machen.</p>

                        
                        
                            <p>
                                <a href="/2013/09/01/2013-09-01-using-hooks-in-git/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope="" itemtype="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2013/04/01/2013-04-01-set-acl-with-powershell/">Set-acl with Powershell</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Mon Apr 01 2013 00:00:00 GMT+0200">
	
		    Apr 01, 2013
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/develop/">develop</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>In meinem letzten Projekt war eine meiner Aufgaben, ein Script zu erstellen, das eine definierte Verzeichnisstruktur erstellt und einem bestimmten User die notwendigen Zugriffrechte darauf gibt.<br>Weiterhin sollte das Script dann im IIS eine Website mit einem eigenen AppPool in diesem Verzeichnis erstellen.</p>
<p>Ich hatte mich entschieden, das Script mit Powershell zu erstellen, da es hier schon fertige Module von Microsoft gibt, um den IIS zu verwalten, ohne das man dies über WMI machen müsste.</p>
<p>Um dieses Modul allerdings zu verwenden, muss man es in Powershell erst einmal importieren. Das macht man ganz einfach mit foldener Codezeile.</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> -<span class="keyword">Name</span> WebAdministration</div></pre></td></tr></table></figure>
<p>Damit das Module importiert werden kann, muss der IIS mit den Management Services installiert sein. Will man prüfen, ob das Modul auch wirklich installiert ist, so kann man das mit folgendem Code machen und im negativen Fall den Benutzer darauf hinweisen.</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">if </span>((<span class="built_in">get-module</span> -<span class="string">name </span><span class="string">WebAdministration </span>-<span class="string">erroraction </span><span class="string">silentlycontinue)</span> -<span class="string">eq </span>$<span class="string">false)</span> &#123;</div><div class="line"><span class="string">Write-Host </span><span class="string">"The Powershell module for WebAdministration is not installed! Please check your IIS installation!"</span> -f <span class="string">Red</span></div><div class="line"><span class="string">return</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Die Website erstellt man dann mit folgendem Code</p>
<figure class="highlight cos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">$integrated</span> = <span class="number">0</span></div><div class="line"><span class="keyword">New</span>-WebAppPool -Name <span class="built_in">$appPoolName</span></div><div class="line"><span class="keyword">Set</span>-ItemProperty IIS:AppPools\<span class="built_in">$appPoolName</span> managedRuntimeVersion v4.0</div><div class="line"><span class="keyword">Set</span>-ItemProperty IIS:AppPools\<span class="built_in">$appPoolName</span> managedPipelineMode <span class="built_in">$integrated</span></div><div class="line"><span class="keyword">New</span>-Website -Name <span class="built_in">$webServiceName</span> -PhysicalPath <span class="built_in">$directoryPath</span> -ApplicationPool <span class="built_in">$appPoolName</span></div><div class="line">Remove-WebBinding -Name <span class="built_in">$webServiceName</span></div><div class="line"><span class="keyword">New</span>-WebBinding -Name <span class="built_in">$webServiceName</span> -IPAddress <span class="string">"*"</span> -Port <span class="built_in">$port</span> -HostHeader <span class="built_in">$webServiceName</span></div></pre></td></tr></table></figure>
<p>Seit IIS7 ist es so, das der AppPool nicht mehr wie früher mit dem Account <strong>NetworkService</strong> läuft sondern es dafür eigene <strong>IIS AppPool</strong> Identities gibt. Wenn man einen neuen AppPool erstellt, läuft dieser unter dem Benutzer <strong>IIS AppPools\AppPoolname</strong>. Es müssen diesem Benutzer noch die Zugriffsrechte auf das Verzeichnis gegeben werden. Normalerweise sollten diesem Benutzer nur auf bestimmte Verzeichniss, wie das Log-Verzeichnis Schreibrechte gegeben werden. Auf die anderen Verzeichniss reichen Lesezugriffsrechte. Auch hierfür hat die Powershell schon die notwendigen Commandlets an Board.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$acl</span> = Get-Acl -Path <span class="variable">$directory</span></div><div class="line"><span class="variable">$userAccount</span> = New-Object System<span class="selector-class">.Security</span><span class="selector-class">.Principal</span><span class="selector-class">.NTAccount</span>(<span class="string">"IIS AppPool"</span>, <span class="variable">$userName</span>)</div><div class="line"><span class="variable">$permission</span> = <span class="variable">$userAccount</span>, <span class="variable">$right</span>, <span class="string">"ContainerInherit,ObjectInherit"</span>, <span class="string">"None"</span>, <span class="string">"Allow"</span></div><div class="line"><span class="variable">$right</span> = New-Object System<span class="selector-class">.Security</span><span class="selector-class">.AccessControl</span><span class="selector-class">.FileSystemAccessRule</span> <span class="variable">$permission</span></div><div class="line"><span class="variable">$acl</span>.SetAccessRule(<span class="variable">$right</span>)</div><div class="line">Set-Acl -AclObject <span class="variable">$acl</span> -Path <span class="variable">$directory</span></div></pre></td></tr></table></figure>
<p>Die meisten Codebeispiele erstellen die Permission mit der folgenden Codezeile</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$permission = $userAccount, $right</div></pre></td></tr></table></figure>
<p>Das hat aber den Nachteil, das sich diese Berechtigung nicht auf neue Unterordner veerbt. Deswegen ist die erste Variante in den meisten Fällen sicher die zu bevorzugende.</p>

                        
                        
                            <p>
                                <a href="/2013/04/01/2013-04-01-set-acl-with-powershell/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope="" itemtype="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2013/03/04/2013-03-04-linqperformancetips/">LinqPerformanceTips</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Mon Mar 04 2013 00:00:00 GMT+0100">
	
		    Mar 04, 2013
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/develop/">develop</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>In my latest project I learned some thinks about the performance of Linq when you often query in-memory repositories. Linq is very easy to use and with that you can very quick implement the methods that you need for an repository. But sometimes it’s useful to think a little bit more how often a method will be called. In my latest project I had the situation to call the <strong>GetById</strong> method for more than 20.000 times. And my in-memory repository had more than 700 items. In my first attempt I have used the <strong>SingleOrDefault</strong> method to return the correct item. But this was not fast enough. My function has needed more than 2 seconds in sum. My second attempt was, to convert the items into a Dictionary with the id as key and use this dictionary in the <em>GetById</em> function. And this was so much faster. It needs just 220 ms for all calls and this was the performance that I needed.</p>
<p>To generate a dictionary very quick, you can use an extension method from the <strong>System.Linq</strong>     namespace. With the following code you can do this very easy</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">items.ToDictionary(<span class="function"><span class="params">i</span> =&gt;</span> i.Id);</div></pre></td></tr></table></figure>
<p>The same experience I made with the query for any items with the same key. The Linq function <strong>SelectMany</strong> was in summary to slow. In this situation you can’t use a dictionary because the key isn’t unique. But Linq has also an Extension method to solve this problem. With the <strong>ToLookup</strong> function you can generate a very fast lookup table.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">items.ToLookup(<span class="function"><span class="params">i</span> =&gt;</span> i.&#123;PropertyToLookup&#125;);</div></pre></td></tr></table></figure>

                        
                        
                            <p>
                                <a href="/2013/03/04/2013-03-04-linqperformancetips/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope="" itemtype="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2013/02/26/2013-02-26-csvtojsonwithpowershell/">Csv to Json with Powershell</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Tue Feb 26 2013 00:00:00 GMT+0100">
	
		    Feb 26, 2013
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/develop/">develop</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>In my current project I have got some .csf files with the requirement to import these files<br>to my project as base data to use it as inmemory repository.</p>
<p>The best solution was these single line of code in powershell.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Get-Content</span> -path <span class="variable">$inputFile</span> | <span class="built_in">ConvertFrom-Csv</span> -Delimiter <span class="string">';'</span> | <span class="built_in">ConvertTo-Json</span> | <span class="built_in">Out-File</span> <span class="variable">$outputFile</span></div></pre></td></tr></table></figure>
<p>You can download the complete powershell script from my <a href="https://gist.github.com/janbaer/5045798" target="_blank" rel="external">gist repository</a> at github.</p>

                        
                        
                            <p>
                                <a href="/2013/02/26/2013-02-26-csvtojsonwithpowershell/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Jan Baer. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        <!-- Define author's picture -->


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://avatars2.githubusercontent.com/u/528331?v=3&amp;s=140">
        
            <h4 id="about-card-name">Jan Baer</h4>
        
            <h5 id="about-card-bio"><p>I’m a passionated Softwaredeveloper from Munich.</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>Softwaredeveloper</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br>
                Germany
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js"></script>
<!--SCRIPTS END-->



</html>
